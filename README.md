# è½¦ç‰Œè¯†åˆ«ä¸è¯„åˆ†ç³»ç»Ÿ

æ™ºèƒ½è½¦ç‰Œé€‰å·åŠ©æ‰‹ï¼šè‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ä¸­çš„è½¦ç‰Œå·ç ï¼Œæ ¹æ®å¤šç»´åº¦è§„åˆ™è¿›è¡Œè¯„åˆ†æ’åºï¼Œå¹¶æ˜¾ç¤ºè½¦ç‰Œä½ç½®ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install easyocr opencv-python numpy Pillow
```

### 2. è¿è¡Œè¯†åˆ«å’Œè¯„åˆ†

```bash
python analyze_plates.py å›¾ç‰‡.jpg [è¾“å‡º.txt]
```

### 3. æŸ¥çœ‹ç»“æœ

```
è½¦ç‰Œè¯„åˆ†ç»“æœï¼ˆæŒ‰åˆ†æ•°ä»é«˜åˆ°ä½æ’åºï¼‰:
========================================================
 1. CDM88888  [åæ ‡:(1250, 345)] [ç½®ä¿¡åº¦:95%] | æ€»åˆ†: 280.0 | è¿ç»­é‡å¤æ•°å­—: è¿ç»­5ä¸ª8 (+60) | å‰ç¥¥æ•°å­—6/8: å«æœ‰5ä¸ª8 (+100) ...
```

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **è‡ªåŠ¨è¯†åˆ«**: ä½¿ç”¨OCRæŠ€æœ¯ä»å›¾ç‰‡è¯†åˆ«è½¦ç‰Œ
- **æ™ºèƒ½è¯„åˆ†**: 12æ¡å¯é…ç½®è§„åˆ™å¤šç»´åº¦è¯„åˆ†
- **ä½ç½®æ˜¾ç¤º**: æ˜¾ç¤ºè½¦ç‰Œåƒç´ åæ ‡å’Œç½®ä¿¡åº¦
- **çµæ´»é…ç½®**: JSONé…ç½®æ–‡ä»¶ç›´æ¥ä¿®æ”¹åˆ†æ•°
- **æ’åºæ¨è**: è‡ªåŠ¨æŒ‰åˆ†æ•°æ’åº,æ¨èTop 5

---

## ğŸ“Š è¯„åˆ†è§„åˆ™ (å…±12æ¡)

| è§„åˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| é¿å…æ•°å­—4 | æ— 4åŠ åˆ†,æœ‰4æ‰£åˆ† | CD88888(+0) vs CDP4444(-40) |
| è¿ç»­é‡å¤æ•°å­— | è¿å·è¶Šå¤šåˆ†è¶Šé«˜ | CD88888(+60) |
| å‰ç¥¥æ•°å­—6/8 | æ¯ä¸ª6æˆ–8å¾—åˆ† | CD88888(+100) |
| é€’å¢åºåˆ— | è¿ç»­é€’å¢æ•°å­— | CDM6789(+40) |
| å…¨å¶æ•°/å…¨å¥‡æ•° | å…¨å¶æˆ–å…¨å¥‡åŠ åˆ† | CD2468(+20) |
| å…¨è´¨æ•° | å…¨æ˜¯è´¨æ•°(2357)åŠ åˆ† | CDQ2357(+20) |
| ç‰¹æ®Šå­—æ¯MJTQ | å«MJTQå­—æ¯åŠ åˆ† | CDM8888(+10) |
| å¹¸è¿è¿å· | å«168/520ç­‰ | CD168(+25) |
| è¯»éŸ³é¡ºå£ | è°éŸ³å‰åˆ©+éŸ³è°ƒæŠ‘æ‰¬é¡¿æŒ« | CD520(+35) |
| AABBæ¨¡å¼ | å¦‚1122ã€5566 | CD1122(+20) |
| å›æ–‡æ•°å­— | å¦‚121ã€1221 | CD1221(+60) |
| ABABæ¨¡å¼ | å¦‚1212ã€3434 | CD1212(+20) |

---

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `scoring_rules.json`:

```json
{
  "rules": [
    {
      "name": "å‰ç¥¥æ•°å­—6/8",
      "enabled": true,        // true=å¯ç”¨, false=ç¦ç”¨
      "weight": 1.0          // æƒé‡ç³»æ•°
    }
  ],
  "score_weights": {
    "lucky_digit_score": 20,           // æ¯ä¸ª6/8å¾—20åˆ†
    "four_penalty_per_count": 40,      // æ¯ä¸ª4æ‰£40åˆ†
    "repeat_base_score": 15,           // è¿å·åŸºç¡€åˆ†: 2è¿15åˆ†,3è¿30åˆ†
    "smooth_phrase_score": 25,         // é¡ºå£è°éŸ³ç»„åˆ: 25åˆ†
    "aabb_score": 20,                  // AABBæ¨¡å¼: 20åˆ†
    "palindrome_base_score": 15,       // å›æ–‡æ•°å­—: 15åˆ†/ä½
    "abab_score": 20                   // ABABæ¨¡å¼: 20åˆ†
  }
}
```

**ä¿®æ”¹é…ç½®åç›´æ¥è¿è¡Œ,ç«‹å³ç”Ÿæ•ˆ,æ— éœ€æ”¹ä»£ç ã€‚**

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```bash
# è¯†åˆ«å¹¶è¯„åˆ†
python analyze_plates.py screenshot.jpg

# ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
python analyze_plates.py screenshot.jpg result.txt
```

### åªæµ‹è¯•è¯„åˆ†(ä¸è¯†åˆ«)

```python
from plate_scorer import create_default_scorer

scorer = create_default_scorer()
total, details = scorer.score_plate("CD88888")
print(f"æ€»åˆ†: {total}")
```

### æ‰¹é‡å¤„ç†

```python
import os
from analyze_plates import analyze_and_score_plates

for filename in os.listdir("screenshots"):
    if filename.endswith(('.jpg', '.png')):
        analyze_and_score_plates(f"screenshots/{filename}", f"results/{filename}.txt")
```

---

## ğŸ”§ é«˜çº§å®šåˆ¶

### ç¦ç”¨æŸä¸ªè§„åˆ™

```json
{"name": "å…¨è´¨æ•°", "enabled": false}
```

### è°ƒæ•´åˆ†æ•°æƒé‡

```json
{
  "score_weights": {
    "lucky_digit_score": 30,         // æé«˜6/8é‡è¦æ€§
    "four_penalty_per_count": 50     // åŠ é‡å¯¹4çš„æƒ©ç½š
  }
}
```

### æ·»åŠ è‡ªå®šä¹‰è§„åˆ™

å‚è€ƒ `plate_scorer.py` ä¸­çš„è§„åˆ™ç±»å®ç°:

```python
class Rule13_CustomRule(ScoringRule):
    """è‡ªå®šä¹‰è§„åˆ™"""

    def __init__(self, score: float = 20):
        super().__init__("è‡ªå®šä¹‰è§„åˆ™", weight=1.0)
        self.score = score

    def calculate_score(self, plate_number: str) -> ScoreResult:
        digits = self.extract_digits(plate_number)
        # å®ç°ä½ çš„è¯„åˆ†é€»è¾‘
        if æ»¡è¶³æ¡ä»¶:
            return ScoreResult(self.name, self.score, "åŸå› è¯´æ˜")
        return ScoreResult(self.name, 0, "ä¸æ»¡è¶³")
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
license_plate/
â”œâ”€â”€ analyze_plates.py          # ä¸»ç¨‹åº: è¯†åˆ«+è¯„åˆ†
â”œâ”€â”€ plate_scorer.py            # è¯„åˆ†å¼•æ“æ ¸å¿ƒ
â”œâ”€â”€ scoring_rules.json         # é…ç½®æ–‡ä»¶ â­
â”œâ”€â”€ tests/                     # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ test_pronunciation.py
â”‚   â””â”€â”€ test_patterns.py
â”œâ”€â”€ images/                    # ç¤ºä¾‹å›¾ç‰‡
â”‚   â”œâ”€â”€ test1.jpg
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md                  # è¯´æ˜æ–‡æ¡£
```

---

## â“ å¸¸è§é—®é¢˜

**Q: å¦‚ä½•è°ƒæ•´è¯„åˆ†?**
A: ç›´æ¥ä¿®æ”¹ `scoring_rules.json` ä¸­çš„ `score_weights` éƒ¨åˆ†,æ”¹å®Œç«‹å³ç”Ÿæ•ˆã€‚

**Q: æŸäº›è½¦ç‰Œè¯†åˆ«ä¸å‡†ç¡®?**
A: ç¡®ä¿å›¾ç‰‡æ¸…æ™°,è½¦ç‰Œæ ¼å¼ä¸º2-3ä¸ªå­—æ¯+4-5ä½æ•°å­—ã€‚ç³»ç»Ÿå·²ä½¿ç”¨åŸºç¡€OCRå‚æ•°ä»¥ä¿è¯æœ€ä½³è¯†åˆ«è´¨é‡ã€‚

**Q: å¦‚ä½•ç¦ç”¨æŸä¸ªè§„åˆ™?**
A: åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® `"enabled": false`

**Q: è¯†åˆ«é€Ÿåº¦æ…¢æ€ä¹ˆåŠ?**
A: é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½OCRæ¨¡å‹,ä¹‹åä¼šå¿«å¾ˆå¤šã€‚å¯é€‰:é™ä½å›¾ç‰‡åˆ†è¾¨ç‡ã€‚

**Q: è½¦ç‰Œä½ç½®åæ ‡æ˜¯ä»€ä¹ˆ?**
A: æ˜¾ç¤ºçš„æ˜¯è½¦ç‰Œä¸­å¿ƒç‚¹çš„åƒç´ åæ ‡ (x, y),å·¦ä¸Šè§’ä¸ºåŸç‚¹ã€‚

---

## ğŸ¯ é…ç½®å»ºè®®

### åå¥½å‰ç¥¥æ•°å­—(æ¨è6/8,ä¸¥æƒ©4)

```json
{
  "score_weights": {
    "lucky_digit_score": 30,
    "four_penalty_per_count": 50,
    "repeat_base_score": 20
  }
}
```

### åå¥½è§„å¾‹æ€§(è¿å·/é€’å¢/æ¨¡å¼)

```json
{
  "score_weights": {
    "repeat_base_score": 25,
    "sequence_base_score": 30,
    "aabb_score": 25,
    "abab_score": 25
  }
}
```

### åå¥½é¡ºå£å¥½è®°

```json
{
  "score_weights": {
    "smooth_phrase_score": 30,
    "palindrome_base_score": 20,
    "lucky_sequence_score": 35
  }
}
```

---

## å½“å‰é»˜è®¤é…ç½®

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `four_penalty_per_count` | 40 | ä¸¥æƒ©æ•°å­—4 |
| `lucky_digit_score` | 20 | å¼ºè°ƒ6/8 |
| `smooth_phrase_score` | 25 | é‡è§†é¡ºå£ |
| `palindrome_base_score` | 15 | å›æ–‡åŠ åˆ† |

**é…ç½®ç‰¹ç‚¹**: å¹³è¡¡ä¼ ç»Ÿå‰ç¥¥æ•°å­—å’Œè§„å¾‹ç¾æ„Ÿ,ä¸¥æ ¼è¿‡æ»¤æ•°å­—4ã€‚

---

**ç¥æ‚¨é€‰åˆ°å¿ƒä»ªçš„è½¦ç‰Œå·!** ğŸš—âœ¨

---

## ğŸ“ è¯´æ˜

æœ¬ä»“åº“æ‰€æœ‰ä»£ç å‡ç”± [Claude Code](https://claude.ai/code) ç”Ÿæˆã€‚
